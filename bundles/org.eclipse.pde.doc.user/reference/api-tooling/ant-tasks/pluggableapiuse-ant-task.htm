<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="copyright" content="Copyright (c) IBM Corporation and others 2009. This page is made available under license. For full details see the LEGAL in the documentation book that contains this page.">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="stylesheet" href="../../../apache_style.css" type="text/css">
<title>Pluggable API Use Ant Task</title>
<script language="JavaScript" src="PLUGINS_ROOT/org.eclipse.help/livehelp.js" type="text/javascript"> </script>
</head>
<body>
<h1>Pluggable API Use Ant Task </h1>
<h2>Purpose</h2>
<p>This task runs a complete search of a given baseline to determine a producer-centric report of API usage and report those results
to the supplied <code>IApiSearchReporter</code>.</p>
<p>The analysis does not include bundles that are not API Tools enabled by default.</p>

<h2>Usage</h2>
<h3>Description</h3>
<p>The name of the ant task is: <code>apitooling.pluggableapiuse</code>. To be used, the jar file <code>apitooling-ant.jar</code> and the 
jar file for the database driver you wish to use must to be on the ant classpath.</p>
<pre>
	<b><font color="#0000ff">&lt;apitooling.apiusedb
		baseline=<font color="#008000">"..."</font>
		scope=<font color="#008000">"..."</font>
		reporterclass=<font color="#008000">"..."</font>
		proceedonerror=<font color="#008000">"..."</font>
		includenonapiprojects=<font color="#008000">"..."</font>
		includesystemlibraries=<font color="#008000">"..."</font>
		considerinternal=<font color="#008000">"..."</font>
		considerapi=<font color="#008000">"..."</font>
		eefile=<font color="#008000">"..."</font>
		excludelist=<font color="#008000">"..."</font>
		debug=<font color="#008000">"..."</font>
	/&gt;</font></b>
</pre>
<h3>Parameters</h3>
<table border="1" cellpadding="2" cellspacing="0">
  <tr>
    <td valign="top"><b>Attribute</b></td>
    <td valign="top"><b>Description</b></td>
    <td align="center" valign="top"><b>Required</b></td>
  </tr>
<tr>
	<td valign="top">baseline</td>
	<td valign="top">
		This attribute specifies the location of the current product or profile that you want to search for API usage to.
		<br><br>
		It can be a .zip, .jar, .tgz, .tar.gz file, or a directory that corresponds to a collection of bundles.
		<br><br>
		The location is specified using an absolute path.</td>
	<td align="center" valign="top">Yes</td>
</tr>
<tr>
	<td valign="top">scope</td>
	<td valign="top">
		This attribute specifies the location of the current product or baseline that you want to search against for API usage.
		<br><br>
		It can be a .zip, .jar, .tgz, .tar.gz file, or a directory that corresponds to a collection of bundles. If no scope is provided
		the baseline will act as itself and the search scope.
		<br><br>
		The location is specified using an absolute path.</td>
	<td align="center" valign="top">No</td>
</tr>
<tr>
	<td valign="top">proceedonerror</td>
	<td valign="top">If the use search should include bundles that have resolution errors in the scan.
		<br><br>Default is <code>false</code>.</td>
	<td align="center" valign="top">No</td>
</tr>
<tr>
	<td valign="top">includenonapiprojects</td>
	<td valign="top">If non-API enabled projects should be allowed in the search scope.
		<br><br>Default is <code>false</code>.</td>
	<td align="center" valign="top">No</td>
</tr>
<tr>
	<td valign="top">includesystemlibraries</td>
	<td valign="top">If system libraries should be allowed in the search scope.
		<br><br>Default is <code>false</code>.</td>
	<td align="center" valign="top">No</td>
</tr>
<tr>
	<td valign="top">reporterclass</td>
	<td valign="top">
		This attribute specifies the package-qualified name of the class that should be loaded and have search
		results reported to it. The class must implement <code>IApiSearchReporter</code> and must appear on the Ant
		classpath with any required classes.
		<br><br>
		<p>For example <code>org.eclipse.a.b.c.MyReporter</code>.</p>
	</td>
	<td align="center" valign="top">Yes</td>
</tr>
<tr>
	<td valign="top">considerinternal</td>
	<td valign="top">If internal references should be considered during the search.
		<br><br>Default is <code>false</code>.</td>
	<td align="center" valign="top">No</td>
</tr>
<tr>
	<td valign="top">considerapi</td>
	<td valign="top">If API references should be considered during the search.
		<br><br>Default is <code>false</code>.</td>
	<td align="center" valign="top">No</td>
</tr>
<tr>
	<td valign="top">eefile</td>
	<td valign="top">Set the execution environment file to use. 
		<br><br>By default, an execution environment file corresponding to a JavaSE-1.6 execution environment is used.
		<br><br>The format of the file is described in this <a href="http://wiki.eclipse.org/index.php/Execution_Environment_Descriptions" target="blank">wiki page</a>.
		<br><br>The file is specified using an absolute path.</td>
	<td align="center" valign="top">No</td>
</tr>
<tr>
	<td valign="top">excludelist</td>
	<td valign="top">Set the exclude list location. 
		<br><br>The exclude list is used to know what bundles should excluded from the scope during a search.
		The lines that start with '#' are ignored from the excluded elements.
		<br><br>
		Regular expressions can be used in the listing but must be prefixed with 'R:'. For example
		<code>R:org.eclipse.*</code>
		<br>The location is specified using an absolute path.
		<br>The format of the exclude list file looks like this:
<pre>
 # DOC BUNDLES
 R:org.eclipse.*.doc.*
 
 # NON-ECLIPSE BUNDLES
 com.ibm.icu
 com.jcraft.jsch
 javax.servlet
 javax.servlet.jsp
 ...
</pre></td>
	<td align="center" valign="top">No</td>
</tr>
<tr>
	<td valign="top">debug</td>
	<td valign="top">Set the debug value.
		<br><br>The possible values are: <code>true</code>, <code>false</code>
		<br>Default is <code>false</code>.</td>
	<td align="center" valign="top">No</td>
</tr>
<tr>
</table>

<h3>Examples</h3>
<pre>
	<b><font color="#0000ff">&lt;apitooling.apiusedb
		baseline=<font color="#008000">"/eclipse/eclipse.tar.gz"</font>
		scope=<font color="#008000">"/eclipse/jdt_only.tar.gz"</font>
		proceedonerror=<font color="#008000">"true"</font>
		includenonapiprojects=<font color="#008000">"false"</font>
		includesystemlibraries=<font color="#008000">"false"</font>
		reporterclass=<font color="#008000">"org.eclipse.a.b.c.MyReporter"</font>
		considerinternal=<font color="#008000">"true"</font>
		considerapi=<font color="#008000">"true"</font>
		eefile=<font color="#008000">""</font>
		excludelist=<font color="#008000">"/eclipse/excludelist.txt"</font>
		debug=<font color="#008000">"true"</font>
	/&gt;</font></b>
</pre>
<p>This will run the task writing results out to the given search reporter class.
It will use the exclude list located in <code>/eclipse/excludelist.txt</code> to reduce the scope of the search.</p>
<p>If debug is enabled, some debug tracing will show up in the ant console.</p>

<p><img src="../../../images/ngrelr.png" alt="Related reference" border="0"></p>
<p><a href="apifreeze-ant-task.htm">API Tools API Freeze Ant Task</a>
<br><a href="filegeneration-ant-task.htm">API Tools File Generation Ant Task</a>
<br><a href="analysis-reportconversion-ant-task.htm">API Tools Analysis Report Conversion Ant Task</a>
<br><a href="apifreeze-reportconversion-ant-task.htm">API Tools API Freeze Report Conversion Ant Task</a>
<br><a href="apiuse-reportconversion-ant-task.htm">API Tools API Use Report Conversion Ant Task</a>
</p>
</body>
</html>
