<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
                                     
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
                                     
  <meta http-equiv="Content-Style-Type" content="text/css">
                                      
  <link rel="STYLESHEET" href="../book.css" charset="ISO-8859-1" type="text/css">
  <title>Programmatically Writing a Jar file</title>
                                                                  
  <link rel="stylesheet" type="text/css" href="../book.css">
</head>
  <body bgcolor="#ffffff">
 
<h2>Programmatically writing a Jar file</h2>
 
<p> The <a href="../reference/api/org/eclipse/jdt/ui/jarpackager/package-summary.html"> 
  org.eclipse.ui.jarpackager</a> package provides utility classes to programmatically 
  export files to a Jar file. Below a code snippet that outlines the use of the 
  <a href="../reference/api/org/eclipse/jdt/ui/jarpackager/JarPackageData.html">JarPackageData</a> 
  class:</p>
<p class="Code">void createJar(IType mainType, IFile[] filestoExport) {<br>
&nbsp;&nbsp; &nbsp;Shell parentShell= ...;<br>
&nbsp;&nbsp; &nbsp;JarPackageData description= new JarPackageData();<br>
  &nbsp;&nbsp; &nbsp;IPath location= new Path("C:/tmp/myjar.jar");<br>
&nbsp;&nbsp; &nbsp;description.setJarLocation(location);<br>
&nbsp;&nbsp; &nbsp;description.setSaveManifest(true);<br>
&nbsp;&nbsp; &nbsp;description.setManifestMainClass(mainType);<br>
&nbsp;&nbsp; &nbsp;description.setElements(filestoExport);<br>
&nbsp;&nbsp; &nbsp;IJarExportRunnable runnable= description.createJarExportRunnable(parentShell);<br>
&nbsp;&nbsp; &nbsp;try {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;new ProgressMonitorDialog(parentShell).run(true,
true, runnable);<br>
&nbsp;&nbsp; &nbsp;} catch (InvocationTargetException e) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// An error has occurred while executing
the operation<br>
&nbsp;&nbsp; &nbsp;} catch (InterruptedException e) {<br>
&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;// operation had been canceled.<br>
&nbsp;&nbsp; &nbsp;}<br>
}<br>
</p>
 <br>
Additional API is provided to create a plug-in specific subclass of JarPackageData. 
This allows other plug-ins to implement their own Jar export/import wizards and 
to save the content of the JarPackageData object to a corresponding Jar description 
file.<br>
 
<p><a href="../hglegal2002.htm"><img border="0" src="../ngibmcpy2002.gif">
 </a>
 </p>
 
</body>
</html>
