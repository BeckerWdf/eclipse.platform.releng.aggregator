<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta http-equiv="Content-Style-Type" content="text/css">
<link rel="STYLESHEET" href="../book.css" charset="ISO-8859-1" type="text/css">
<title>Eclipse 3.0 Porting Guide Guidelines and Template</title>
</head>

<body>

<h1>Eclipse 3.0 Porting Guide<br>
Guidelines and Template</h1>
<p>Last modified 12:00 EST October 27, 2003</p>
<p>The <i>Eclipse 3.0 Porting Guide</i> is intended to be the primary resource
for plug-in developers already familiar with 2.0 or 2.1 to learn about the
changes in 3.0 affecting the way they write their plug-ins. (Note that plug-in
developers that are new to Eclipse will generally read the Eclipse Platform
Plug-in Developer Guide, JDT Plug-in Developer Guide, and the PDE Guide. So
these developers are not the audience of the porting guide.) An up-to-date draft
of the <i>Eclipse 3.0 Porting Guide</i> is included with each milestone build
(eclipse/readme/eclipse_3_0_porting_guide.html in an Eclipse install) so that
it's possible for anyone to climb aboard the 3.0 release wagon at the early
stages, or to estimate the amount of effort that will be involved in eventually
porting existing plug-ins to 3.0.</p>
<p>In general, the porting guide should cover any change in the API in 3.0 that
would merit someone with an existing plug-in to review and possibly modify their
code. This includes:</p>
<ul>
  <li>Breaking changes to Eclipse API (includes extension points), including
    <ul>
      <li>changes to API element signatures that break binary compatibility (see
        <i><a href="http://eclipse.org/eclipse/development/java-api-evolution.html">Evolving
        Java-based APIs</a></i>); e.g.,
        <ul>
          <li>deleting an API method</li>
          <li>adding a method to an API interface that clients are allowed to
            implement</li>
        </ul>
      </li>
      <li>changes to API element specifications that break contract
        compatibility (see <i><a href="http://eclipse.org/eclipse/development/java-api-evolution.html">Evolving
        Java-based APIs</a></i>); e.g.,
        <ul>
          <li>changing the spec of an API method to allow it to return null
            where null was illegal before</li>
          <li>changing the spec of an API method to add new preconditions</li>
        </ul>
      </li>
      <li>change to extension points; e.g.,
        <ul>
          <li>renaming the extension point (move to a different plug-in)</li>
          <li>changing the XML markup in an incompatible way</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Non-breaking changes to Eclipse API that nevertheless may suggest a
    porting pass
    <ul>
      <li>API deprecations</li>
      <li>specification clarifications</li>
    </ul>
  </li>
  <li>API additions that create significant opportunities to do existing things
    better that in the past</li>
</ul>
<p>Each porting guide entry should suggest answers to these questions:</p>
<ol>
  <li>What changed?</li>
  <li>Why did we make this change? What was so important that we needed to
    change? What were the other options and why did we believe this was the best
    choice? How was breakage kept to the bare minimum?</li>
  <li>What kinds of plug-ins are likely to be affected by the changes? Is this
    something that likely affects most existing plug-ins, or something rather
    rare? For example, if a change only affects text editors, then plug-ins that
    do deal with text editors are clearly unaffected.</li>
  <li>How does the change break existing plug-ins? Do they cause runtime
    exceptions? Missing functionality? Or do they work fine but could be
    significantly improved in some way?</li>
  <li>How do you actually port existing code to 3.0? The instructions should be
    clear and explicit, so that a bright student unfamiliar with the code could
    be assigned the porting task.</li>
</ol>
<h2>Example porting guide entries</h2>
<p>There is no set format for porting guide entries. Here are some examples: </p>
<h4>Interface INewWizard (package org.eclipse.ui; plug-in org.eclipse.ui)</h4>
<ul>
  <li>Prior to 3.0, the selection passed to IWorkbenchWizard.init(IWorkbench,
    IStructuredSelection) for a new wizard was preprocessed. If there was no
    structured selection at the time the wizard was invoked, but the active
    workbench window had an active editor open on an IFile, then the selection
    passed in would consist of that IFile. In 3.0, the generic new wizard does
    not do any preprocessing, and an empty selection will be passed when there
    is no structured selection.
  <li>The selection passed to the wizard is generally used to prime the
    particular wizard page with contextually appropriate values.
  <li>Client that implement INewWizard and requires this capability should add
    the following to their init(IWorkbench, IStructuredSelection selection)
    method to compute a selection from the active editor's input:
    <pre>if (selection.isEmpty()) {
   IWorkbenchWindow window = PlatformUI.getWorkbench().getActiveWorkbenchWindow();
   if (window != null) {
      IWorkbenchPart part = window.getPartService().getActivePart();
      if (part instanceof IEditorPart) {
         IEditorInput input = ((IEditorPart) part).getEditorInput();
         if (input instanceof IFileEditorInput) {
            selection = new StructuredSelection(((IFileEditorInput) input).getFile());
         }
      }		
  }
}</pre>
  </li>
</ul>
<h4>Interface IEditorLauncher (package org.eclipse.ui; plug-in org.eclipse.ui)</h4>
<ul>
  <li>The editor launcher interface is implemented by plug-ins that contribute
    external editors.
  <li>The following method was removed from this interface because it was
    resource-specific:
    <ul>
      <li>public void open(IFile file)</li>
    </ul>
  <li>It was replaced by
    <ul>
      <li>public void open(IPath file)</li>
    </ul>
  <li>Clients that call IEditorLauncher.open(file) should instead call
    IEditorLauncher.open(file.getLocation()).
  <li>Clients that implement this interface should replace their implementation
    of open(IFile) by one for open(IPath).</li>
</ul>

</body>

</html>
